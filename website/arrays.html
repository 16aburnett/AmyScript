<!--
    AmyScript Documentation Website
    
    Author: Amy Burnett
    Created: June 9 2021

-->

<!DOCTYPE html>
<html>
    <head>
        <title>AmyScript Documentation</title>
        <!-- <link rel="icon" type="image/png" href="../res/favicon-32x32.png" sizes="32x32" /> -->
        <link rel="stylesheet" type="text/css" href="index.css">
        <script type="text/javascript" src="shell.js"></script>
        <script type="text/javascript" src="index.js"></script>
    </head>
    <body>
        <div id="page_header">
            <script>loadHeader ("page_header")</script>
        </div>
        <div id="page_middle">
            <div id="page_sidebar">
                <script>loadSidebar ("page_sidebar", "arrays.html")</script>
            </div>
            <div id="page_content">
            <!---------------------- CONTENT SECTION ---------------------->
                <h2>AmyScript - Arrays</h2>
                
                <div class="section_links">
                    <div class="section_links_header">
                        <h3>Sections</h3>
                    </div>
                    <ul class="dashed">
                        <li><a href="#link_declaration">Array Declaration</a></li>
                        <li><a href="#link_allocation">Array Allocation</a></li>
                        <li><a href="#link_accessing">Accessing Array Values</a></li>
                        <li><a href="#link_sizeof">Sizeof Keyword (<span class="inlineCode">sizeof</span>)</a></li>
                        <li><a href="#link_free">Array Deallocation (<span class="inlineCode">free</span>)</a></li>
                        <li><a href="#link_initialization">Array Initializer List Operator</a></li>
                        <li><a href="#link_multiArray">2D Arrays</a></li>
                    </ul>
                </div>

                <p>
                    An array is a very useful data type. 
                    They can store a lot of values and be referenced using just one variable name, 
                    which greatly helps with organization and processing large amounts of data. 
                </p>

                <p>
                    <strong>Homogeneous:</strong> Arrays are homogeneous, 
                    meaning that you can store any type in an array, but all values in an array must be the same type.
                    For example, you can have an array of integers, but all values in that array must be an integer. 
                    Same for arrays of floats, characters, or objects. 
                </p>


                <p>
                    <strong>Heap:</strong> In AmyScript, all arrays and objects are allocated on the heap. 
                    The heap is a data structure stored in memory that allows consecutive blocks of memory to be allocated for a program's use.
                    In contrast, C and C++ can allocate arrays on the stack and on the heap. 
                    The actual value of an array variable is the address in memory where the array's values are located. 
                </p>

                <a href="#page_header"><p class="backToTop">back to top</p></a>
                <hr />

                <!-- DECLARATION -->

                <h3 id="link_declaration">Array Declaration</h3>

                <p>
                    Declaring an array simply sets up a variable to store the array's address for when the array is initialized.
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Array Declaration Syntax</h3>
                    </div>
                    <pre class="code">&#60;type-specifier&#62;[] &#60;variable-name&#62;;</pre>
                    <div class="codeBlockHeader">
                        <h3>Array Declaration Example</h3>
                    </div>
                    <pre class="code">int[] x;</pre>
                    <p><span class="inlineCode">int[]</span> denotes an array of integers.</p>
                </div>

                <p>
                    <strong>NOTE:</strong> If you declare the array without allocating it, the value stored in <span class="inlineCode">x</span> will be undefined.
                    Make sure you allocate the array before trying to access/assign it's values
                </p>

                <a href="#page_header"><p class="backToTop">back to top</p></a>
                <hr />

                <!-- ALLOCATION -->

                <h3 id="link_allocation">Array Allocation</h3>

                <p>
                    Allocating an array tells the computer to reserve an amount of memory (on the heap) to store the array's values.
                    Once the array is allocated, its address can be saved to a variable for later use.
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Array Allocation Expression Syntax</h3>
                    </div>
                    <pre class="code">new &#60;type-specifier&#62;[&#60;expression&#62;]<br/></pre>
                    <div class="codeBlockHeader">
                        <h3>Array Allocation Example 1</h3>
                    </div>
                    <pre class="code">int[] myArray = new int[5];</pre>
                    <p>This creates an array that stores <span class="inlineCode">5</span> integers and saves the address of that array in the variable <span class="inlineCode">myArray</span>.</p>
                </div>

                <a href="#page_header"><p class="backToTop">back to top</p></a>
                <hr />

                <!-- ACCESSING -->

                <h3 id="link_accessing">Accessing Array Values</h3>

                <p>
                    The array variable stores the address of where all the array's values are stored,
                    but how are the values accessed?
                </p>

                <p>
                    Values can be accessed using the <strong>Subscript Operator</strong> (<span class="inlineCode">[]</span>). 
                    The subscript operator requires an index value (<span class="inlineCode">int</span>) and can locate a specific element in the array.
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Subscript Operator Syntax</h3>
                    </div>
                    <pre class="code">&#60;array-name&#62;[&#60;offset&#62;]<br/></pre>
                    <p>
                        The offset must be an integer (<span class="inlineCode">int</span>) 
                        between 0 and the size of the array [0, <span class="inlineCode">sizeof</span> (array)-1]
                    </p>
                    <div class="codeBlockHeader">
                        <h3>Subscript Operator Example</h3>
                    </div>
                    <pre class="code">int[] myArray = new int[5];
myArray[0] = 1;</pre>
                    <p>This creates an array and sets the first value of the array to <span class="inlineCode">1</span>.</p>
                </div>
                
                <p>
                    <strong>NOTE:</strong> It's very important to keep track of the size of the array because 
                    if you try to access values that are outside the bounds of the array, 
                    then you could overwrite values that might break the interpreter and crash your program. 
                </p>

                <a href="#page_header"><p class="backToTop">back to top</p></a>
                <hr />

                <!-- SIZEOF -->

                <h3 id="link_sizeof">Sizeof Keyword (<span class="inlineCode">sizeof</span>)</h3>

                <p>
                    The <span class="inlineCode">sizeof</span> keyword returns the size of a given array. 
                </p>

                <p>
                    The <span class="inlineCode">sizeof</span> keyword looks like a function call, however,
                    it is its own structure. <span class="inlineCode">sizeof</span> takes only one parameter, 
                    and that parameter can be any type as long as it is an array.
                    <span class="inlineCode">sizeof</span> always returns an integer (<span class="inlineCode">int</span>) representing the size.
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Sizeof Syntax</h3>
                    </div>
                    <pre class="code">sizeof (&#60;expression&#62;)</pre>
                    <div class="codeBlockHeader">
                        <h3>Sizeof Example 1</h3>
                    </div>
                    <pre class="code">// creating an array with size 5
int[] myArray = new int[5];
myArray[0] = 12;
myArray[1] = 4;
myArray[2] = 18;
myArray[3] = 42;
myArray[4] = 7;

// sizeof returns an integer 
print ("size = ");
println (sizeof (myArray));

// sizeof is useful in loops
print ("vals = ");
for (int i = 0; i < sizeof (myArray); ++i)
{
    print (myArray[i]);
    print (" ");
}    
println ();

// sizeof can get the size of arrays that are passed as parameters 
// this allows the function to handle arrays of varying sizes 
// the alternative would be to pass the size as a separate parameter 
function void printSize (int[] arr)
{
    print ("size = ");
    println (sizeof (arr));
}

printSize (myArray);</pre>
                    <p>Result</p>
                    <pre class="code">size = 5
vals = 12 4 18 42 7 
size = 5</pre>
                </div>

                <a href="#page_header"><p class="backToTop">back to top</p></a>
                <hr />

                <!-- FREE -->

                <h3 id="link_free">Array Deallocation (<span class="inlineCode">free</span>)</h3>

                <p>
                    Arrays are allocated in memory on the heap and take up space. 
                    Unfortunately, AmyScript does not have a garbage collector like Java,
                    so you need to remember to manage the memory on your own to avoid <strong>memory leaks</strong>. 
                    The <span class="inlineCode">free</span> keyword deallocates the memory associated with an array
                    so that memory can be used for something else later on. 
                </p>

                <p>
                    <strong>Memory Leak:</strong> A memory leak happens when you allocate space for an array or object 
                    and the variable that stores the reference to that array or object goes out of scope. 
                    When this happens, the memory stays allocated even though the variable no longer exists. 
                    And overtime, your program will run out of memory if it runs for long enough. 
                    This is why it is important to free up any memory that you are no longer using.
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Free Syntax</h3>
                    </div>
                    <pre class="code">free (&#60;expression&#62;)</pre>
                    <div class="codeBlockHeader">
                        <h3>Free Example 1</h3>
                    </div>
                    <pre class="code">// creating an array
int[] myArray = new int[5];

//... using the array

free (myArray);</pre>

                </div>

                <a href="#page_header"><p class="backToTop">back to top</p></a>
                <hr />

                <!-- INITIALIZER -->

                <h3 id="link_initialization">Array Initializer List Operator</h3>

                <p>
                    The initializer operator allocates an array and fills it with the values that you provide. 
                    The size of the array becomes the number of values provided.
                </p>

                <p>
                    Since arrays are homogeneous, all values in the initializer must be the same type.
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Array Initializer Syntax</h3>
                    </div>
                    <pre class="code">[&#60;expression0&#62;, &#60;expression1&#62;, ..., &#60;expressionN&#62;]</pre>
                    <div class="codeBlockHeader">
                        <h3>Array Initializer Example 1</h3>
                    </div>
                    <pre class="code">// creates an array with values 12, 7, 42, and 22
int[] nums = [12, 7, 42, 22];
for (int i = 0; i < sizeof (nums); ++i)
{
    print (nums[i]);
    print (" ");
}</pre>
                    <p>
                        Result:
                    </p>
                    <pre class="code">12 7 42 22 </pre>
                </div>

                <p>
                    <strong>NOTE:</strong> Array initializer lists cannot be empty. 
                </p>

                <a href="#page_header"><p class="backToTop">back to top</p></a>
                <hr />

                <!-- 2D ARRAYS -->

                <h3 id="link_multiArray">2D Arrays</h3>

                <p>
                    Sometimes you might want to create an array of arrays
                    which can be helpful for images, boards, grids, or even matrix calculations.   
                    Fortunately, this is possible in AmyScript since arrays can store any type 
                    including other arrays. You could even have an array of arrays of arrays (<span class="inlineCode">int[][][]</span>). Array inception! 
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Multi-Dimensional Arrays</h3>
                    </div>
                    <pre class="code">&#60;type-specifier&#62;[][] &#60;array-name&#62; = new &#60;type-specifier&#62;[&#60;offset&#62;][];<br/></pre>
                    <div class="codeBlockHeader">
                        <h3>Multi-Dimensional Arrays Example</h3>
                    </div>
                    <pre class="code">int[][] myArray = new int[5][];
for (int i = 0; i < 5; ++i)
{
    // remember to initialize each subarray!
    myArray[i] = new int[5];
    for (int j = 0; j < 5; ++j)
    {
        myArray[i][j] = i * 5 + j;
    }
}</pre>
                    <p>
                        <strong>NOTE:</strong> Only the first array size is required in the initializer <span class="inlineCode">new int[5][]</span>. 
                        The subarrays will need to be initialized separately (and can vary in sizes).
                    </p>
                    <p>Above creates a 5x5 array with values:</p>
                    <pre class="code"> 0  1  2  3  4 
 5  6  7  8  9 
10 11 12 13 14 
15 16 17 18 19 
20 21 22 23 24 </pre>
                </div>
                
                <p>
                    If you would like to work with 2D arrays, then you should learn about <a href="loops.html">Loops</a> 
                    because they can be massively helpful.
                </p>

                <p>
                    Multi-Dimensional arrays can also be intialized using initializer lists. 
                </p>

                <div class="codeBlock">
                    <div class="codeBlockHeader">
                        <h3>Multi-Dimensional Arrays with Initializer Lists Example 1</h3>
                    </div>
                    <pre class="code">int[][] nums = [[1, 2, 3], [4, 5, 6, 7], [8, 9]];</pre>
                    <p>
                        Produces a 2D array with values:
                    </p>
                    <pre class="code">row0: 1 2 3
row1: 4 5 6 7 
row2: 8 9</pre>
                    <p>
                        Multi-Dimensional arrays can have subarrays of different sizes. 
                        This is called a <strong>Jagged Array</strong>.
                    </p>
                </div>

                <a href="#page_header"><p class="backToTop">back to top</p></a>

            <!-------------------- END CONTENT SECTION -------------------->
            </div>
        </div>    
        <div id="page_footer">
            <script>loadFooter ("page_footer")</script>
        </div>
    </body>
</html>