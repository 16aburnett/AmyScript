// AmyAssembly compiled from AmyScript
// Filename: testFiles/test.amy
//========================================================================

//========================================================================
//### LIBRARY CODE #######################################################
//========================================================================

// AmyScript Built-in library
// Author: Amy Burnett
//========================================================================

jump __endOfLibrary

//========================================================================
// Global Variables

    assign __null 0

//========================================================================
// Prints a given string to the screen
// void print (char[] stringToPrint);
print:
    // grab string
    stackget __str 0
    sizeof __size __str
    // print each char
    // init
    assign __i 0
__print__loop:
    // cond
    cmp __i __size
    jge __print__endloop
    // Body
    print __str[__i]
    // update
    add __i __i 1
    // repeat
    jump __print__loop
__print__endloop:
    return 0

//========================================================================
// Prints a given string to the screen with a newline at the end
// void println (char[] stringToPrint);
println:
    // grab string
    stackget __str 0
    sizeof __size __str
    // print each char
    // init
    assign __i 0
__println__loop:
    // cond
    cmp __i __size
    jge __println__endloop
    // Body
    print __str[__i]
    // update
    add __i __i 1
    // repeat
    jump __println__loop
__println__endloop:
    println
    return 0

//========================================================================
// Prints an int to the screen
// void printInt (int intToPrint);
printInt:
    stackget __str 0
    print __str
    return 0

//========================================================================
// Prints a float to the screen
// void printFloat (float floatToPrint);
printFloat:
    stackget __str 0
    print __str
    return 0

//========================================================================
// Prints a char to the screen
// void printChar (char charToPrint);
printChar:
    // grab string
    stackget __char 0
    print __char
    return 0

//========================================================================
// grabs input from the console 
// char[] input ();
input:
    input __line
    return __line

//========================================================================
// converts an integer to a string
// char[] intToString (int val);
intToString:
    stackget __val 0

    return 0

//========================================================================

__endOfLibrary:
    //push prompt
    //call print

    //call input
    //response name

    //push name
    //call println

//========================================================================
//### COMPILED CODE ######################################################
//========================================================================

// Function Call
   // Arguments
      // Literal
         MALLOC __str 20
         ASSIGN __str[0] 'E'
         ASSIGN __str[1] 'n'
         ASSIGN __str[2] 't'
         ASSIGN __str[3] 'e'
         ASSIGN __str[4] 'r'
         ASSIGN __str[5] ' '
         ASSIGN __str[6] 'y'
         ASSIGN __str[7] 'o'
         ASSIGN __str[8] 'u'
         ASSIGN __str[9] 'r'
         ASSIGN __str[10] ' '
         ASSIGN __str[11] 'n'
         ASSIGN __str[12] 'a'
         ASSIGN __str[13] 'm'
         ASSIGN __str[14] 'e'
         ASSIGN __str[15] ' '
         ASSIGN __str[16] '='
         ASSIGN __str[17] '='
         ASSIGN __str[18] '>'
         ASSIGN __str[19] ' '
         PUSH __str
      POP __arg0
   // Pushing args in reverse order
   PUSH __arg0
   CALL print
   // Remove args
   POP __void
   RESPONSE __retval
   PUSH __retval
// Assignment
   // RHS
      // Function Call
         // Arguments
         // Pushing args in reverse order
         CALL input
         // Remove args
         RESPONSE __retval
         PUSH __retval
   POP __rhs
   ASSIGN name __rhs
   PUSH __rhs
// Function Call
   // Arguments
      // Literal
         MALLOC __str 7
         ASSIGN __str[0] 'H'
         ASSIGN __str[1] 'e'
         ASSIGN __str[2] 'l'
         ASSIGN __str[3] 'l'
         ASSIGN __str[4] 'o'
         ASSIGN __str[5] ','
         ASSIGN __str[6] ' '
         PUSH __str
      POP __arg0
   // Pushing args in reverse order
   PUSH __arg0
   CALL print
   // Remove args
   POP __void
   RESPONSE __retval
   PUSH __retval
// Function Call
   // Arguments
      // Identifier
         PUSH name
      POP __arg0
   // Pushing args in reverse order
   PUSH __arg0
   CALL println
   // Remove args
   POP __void
   RESPONSE __retval
   PUSH __retval
//========================================================================
//### END OF CODE ########################################################
//========================================================================

